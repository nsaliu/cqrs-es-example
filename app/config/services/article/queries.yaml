services:
    _defaults:
        autowire: true
        autoconfigure: false

    # query bus
    App\Article\Infrastructure\Messenger\MessengerQueryBus:
        arguments:
            $messageBus: '@messenger.bus.query'

    App\Shared\Infrastructure\Bus\QueryBusInterface:
        alias: App\Article\Infrastructure\Messenger\MessengerQueryBus

    # query handler
    App\Article\Application\Query\:
        resource: '%kernel.project_dir%/src/Article/Application/Query/*Handler.php'
        tags:
            - { name: messenger.message_handler, bus: messenger.bus.query }
